var matches = [
  {
    "id": 1,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1408803622608,
    "teamGoals": {
      "1": 4,
      "4": 4
    },
    "teamShots": {
      "1": 4,
      "4": 16
    },
    "winnerTeamId": null,
    "wasTie": true
  },
  {
    "id": 2,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1423832780717,
    "teamGoals": {
      "3": 2,
      "4": 2
    },
    "teamShots": {
      "3": 12,
      "4": 37
    },
    "winnerTeamId": null,
    "wasTie": true
  },
  {
    "id": 3,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1412091729359,
    "teamGoals": {
      "1": 2,
      "4": 2
    },
    "teamShots": {
      "1": 44,
      "4": 65
    },
    "winnerTeamId": null,
    "wasTie": true
  },
  {
    "id": 4,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1421261979713,
    "teamGoals": {
      "2": 5,
      "4": 3
    },
    "teamShots": {
      "2": 54,
      "4": 16
    },
    "winnerTeamId": 2,
    "wasTie": false
  },
  {
    "id": 5,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1422428127050,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 58
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 6,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1424855457616,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 3
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 7,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1432336644514,
    "teamGoals": {
      "2": 2,
      "4": 5
    },
    "teamShots": {
      "2": 39,
      "4": 26
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 8,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1415926567098,
    "teamGoals": {
      "1": 2,
      "4": 1
    },
    "teamShots": {
      "1": 7,
      "4": 70
    },
    "winnerTeamId": 1,
    "wasTie": false
  },
  {
    "id": 9,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1410262488819,
    "teamGoals": {
      "2": 2,
      "4": 3
    },
    "teamShots": {
      "2": 63,
      "4": 40
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 10,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1404156365741,
    "teamGoals": {
      "3": 2,
      "4": 0
    },
    "teamShots": {
      "3": 70,
      "4": 0
    },
    "winnerTeamId": 3,
    "wasTie": false
  },
  {
    "id": 11,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1424413910678,
    "teamGoals": {
      "1": 2,
      "4": 2
    },
    "teamShots": {
      "1": 44,
      "4": 29
    },
    "winnerTeamId": null,
    "wasTie": true
  },
  {
    "id": 12,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1413972902869,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 24
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 13,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1414743556559,
    "teamGoals": {
      "3": 5,
      "4": 1
    },
    "teamShots": {
      "3": 45,
      "4": 9
    },
    "winnerTeamId": 3,
    "wasTie": false
  },
  {
    "id": 14,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1423551853770,
    "teamGoals": {
      "3": 2,
      "4": 6
    },
    "teamShots": {
      "3": 75,
      "4": 13
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 15,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1407965249080,
    "teamGoals": {
      "2": 2,
      "4": 4
    },
    "teamShots": {
      "2": 9,
      "4": 14
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 16,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1426896504946,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 15
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 17,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1411443008421,
    "teamGoals": {
      "2": 5,
      "4": 2
    },
    "teamShots": {
      "2": 46,
      "4": 73
    },
    "winnerTeamId": 2,
    "wasTie": false
  },
  {
    "id": 18,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1434714632218,
    "teamGoals": {
      "3": 0,
      "4": 2
    },
    "teamShots": {
      "3": 0,
      "4": 24
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 19,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1408240594693,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 28
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 20,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1431899967315,
    "teamGoals": {
      "3": 1,
      "4": 2
    },
    "teamShots": {
      "3": 50,
      "4": 38
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 21,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1425779778875,
    "teamGoals": {
      "2": 2,
      "4": 0
    },
    "teamShots": {
      "2": 67,
      "4": 37
    },
    "winnerTeamId": 2,
    "wasTie": false
  },
  {
    "id": 22,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1414975763490,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 65
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 23,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1422700307124,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 32
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 24,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1434732914721,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 66
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 25,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1422787800018,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 23
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 26,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1423765370374,
    "teamGoals": {
      "1": 0,
      "4": 4
    },
    "teamShots": {
      "1": 6,
      "4": 5
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 27,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1434768682308,
    "teamGoals": {
      "3": 1,
      "4": 2
    },
    "teamShots": {
      "3": 66,
      "4": 5
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 28,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1417904488782,
    "teamGoals": {
      "2": 1,
      "4": 2
    },
    "teamShots": {
      "2": 50,
      "4": 35
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 29,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1427326941738,
    "teamGoals": {
      "3": 1,
      "4": 1
    },
    "teamShots": {
      "3": 70,
      "4": 58
    },
    "winnerTeamId": null,
    "wasTie": true
  },
  {
    "id": 30,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1406939140128,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 22
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 31,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1421456677039,
    "teamGoals": {
      "3": 1,
      "4": 3
    },
    "teamShots": {
      "3": 59,
      "4": 63
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 32,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1416949495855,
    "teamGoals": {
      "3": 2,
      "4": 4
    },
    "teamShots": {
      "3": 37,
      "4": 7
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 33,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1419077671409,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 73
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 34,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1409492855320,
    "teamGoals": {
      "2": 1,
      "4": 3
    },
    "teamShots": {
      "2": 63,
      "4": 43
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 35,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1422187173783,
    "teamGoals": {
      "1": 2,
      "4": 1
    },
    "teamShots": {
      "1": 39,
      "4": 1
    },
    "winnerTeamId": 1,
    "wasTie": false
  },
  {
    "id": 36,
    "teamIds": [
      1,
      4
    ],
    "timestamp": 1411659338961,
    "teamGoals": {
      "1": 0,
      "4": 2
    },
    "teamShots": {
      "1": 0,
      "4": 18
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 37,
    "teamIds": [
      4,
      4
    ],
    "timestamp": 1431765003484,
    "teamGoals": {
      "4": 0
    },
    "teamShots": {
      "4": 31
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 38,
    "teamIds": [
      2,
      4
    ],
    "timestamp": 1417037008067,
    "teamGoals": {
      "2": 3,
      "4": 4
    },
    "teamShots": {
      "2": 48,
      "4": 21
    },
    "winnerTeamId": 4,
    "wasTie": false
  },
  {
    "id": 39,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1418535522665,
    "teamGoals": {
      "3": 5,
      "4": 3
    },
    "teamShots": {
      "3": 67,
      "4": 50
    },
    "winnerTeamId": 3,
    "wasTie": false
  },
  {
    "id": 40,
    "teamIds": [
      3,
      4
    ],
    "timestamp": 1418094264148,
    "teamGoals": {
      "3": 1,
      "4": 2
    },
    "teamShots": {
      "3": 58,
      "4": 57
    },
    "winnerTeamId": 4,
    "wasTie": false
  }
];



function setWinLose(team) {

}


var Team = React.createClass({
    render: function() {
        return (
            <tr>
                <td>{this.props.team.name}</td>
                <td>{this.props.team.wins}</td>
                <td>{this.props.team.lost}</td>
                <td>{this.props.team.ties}</td>
            </tr>
        ); 
    }
});

var TeamList = React.createClass({
    getInitialState: function() {
        return {
            teams: []
        };
    },

    componentDidMount: function() {
        console.log('props url: '+this.props.url);
        $.get(this.props.url, function(result) {
            if (this.isMounted()) {
                this.setState({
                    teams: result
                });
                console.log('result: ', result);

            }
        }.bind(this));
    },
    render: function() {
        var rows = [];
        var self = this;

        this.state.teams.forEach(function(team) {
            team.wins = 0;
            team.lost = 0;
            team.ties = 0;
        });

        matches.forEach(function(match) {
            var winner = match['winnerTeamId'];
            if(winner) {
                var loser = (match['teamIds'].indexOf(winner) === 0) ? 1 : 0;
                // self.state.teams[winner - 1].wins++;
                // self.state.teams[loser].lost++;
            } else {
                
                // self.state.teams[match['teamIds'][0] - 1].ties++;
                // self.state.teams[match['teamIds'][1] - 1].ties++;

            }
        });
        
        this.state.teams.forEach(function(team) {
            rows.push(<Team team = {team} />)
        });

        return (
            <table>
                <thead>
                    <tr>
                        <th>Team</th>
                        <th>W</th>
                        <th>L</th>
                        <th>T</th>
                    </tr>
                </thead>
                <tbody>{rows}</tbody>
            </table>
        );
    }
});

React.render(
    <TeamList url = {'https://futbol-api.goguardian.com/teams'} />,
    document.getElementById('content')
);